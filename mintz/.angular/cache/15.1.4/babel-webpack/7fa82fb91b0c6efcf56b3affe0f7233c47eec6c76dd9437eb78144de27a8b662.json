{"ast":null,"code":"import { PedidoProduto } from '../pedidos/pedido-produto.model';\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PedidoProdutoService {\n  constructor(http) {\n    this.http = http;\n  }\n  inserir(itensCarrinho, pedido_id) {\n    // Cria um array de observables para inserir os produtos\n    const observables = itensCarrinho.map(element => {\n      let pedidoProduto = new PedidoProduto();\n      pedidoProduto.pedido_id = pedido_id;\n      pedidoProduto.quant = element.quantidade;\n      pedidoProduto.produto_id = element.id;\n      pedidoProduto.preco = element.preco;\n      console.log(element.descricao);\n      console.log(pedidoProduto.pedido_id + \" quant: \" + pedidoProduto.quant + \" id_produto: \" + pedidoProduto.produto_id);\n      // Retorna o observable para a inserção do produto\n      return this.http.post(\"http://localhost:8081/api/pedido-produto\", pedidoProduto);\n    });\n    // Usa o forkJoin para aguardar a conclusão de todos os observables\n    return forkJoin(observables);\n  }\n  atualizar(produto) {\n    this.http.put(\"http://localhost:8081/api/pedido-produto\", produto).subscribe();\n  }\n  listar(pedido_id) {\n    return this.http.get(\"http://localhost:8081/api/pedido-produto/\");\n  }\n}\nPedidoProdutoService.ɵfac = function PedidoProdutoService_Factory(t) {\n  return new (t || PedidoProdutoService)(i0.ɵɵinject(i1.HttpClient));\n};\nPedidoProdutoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PedidoProdutoService,\n  factory: PedidoProdutoService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,aAAa,QAAQ,iCAAiC;AAE/D,SAAgCC,QAAQ,QAAyB,MAAM;;;AAKvE,OAAM,MAAOC,oBAAoB;EAE/BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAgB;EAEjCC,OAAO,CAACC,aAAiC,EAAEC,SAAiB;IACjE;IACA,MAAMC,WAAW,GAAsBF,aAAa,CAACG,GAAG,CAACC,OAAO,IAAG;MAC/D,IAAIC,aAAa,GAAkB,IAAIX,aAAa,EAAE;MACtDW,aAAa,CAACJ,SAAS,GAAGA,SAAS;MACnCI,aAAa,CAACC,KAAK,GAAGF,OAAO,CAACG,UAAU;MACxCF,aAAa,CAACG,UAAU,GAAGJ,OAAO,CAACK,EAAE;MACrCJ,aAAa,CAACK,KAAK,GAAGN,OAAO,CAACM,KAAK;MAEnCC,OAAO,CAACC,GAAG,CAACR,OAAO,CAACS,SAAS,CAAC;MAC9BF,OAAO,CAACC,GAAG,CAACP,aAAa,CAACJ,SAAS,GAAG,UAAU,GAAGI,aAAa,CAACC,KAAK,GAAG,eAAe,GAAGD,aAAa,CAACG,UAAU,CAAC;MAEpH;MACA,OAAO,IAAI,CAACV,IAAI,CAACgB,IAAI,CAAS,0CAA0C,EAAET,aAAa,CAAC;IAC5F,CAAC,CAAC;IAEF;IACA,OAAOV,QAAQ,CAACO,WAAW,CAAC;EAC9B;EAEOa,SAAS,CAACC,OAAsB;IACrC,IAAI,CAAClB,IAAI,CAACmB,GAAG,CAAS,0CAA0C,EAAED,OAAO,CAAC,CAACE,SAAS,EAAE;EACxF;EAEOC,MAAM,CAAClB,SAAiB;IAC7B,OAAO,IAAI,CAACH,IAAI,CAACsB,GAAG,CAAkB,2CAA2C,CAAE;EACrF;;AA9BWxB,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;SAApBA,oBAAoB;EAAAyB,SAApBzB,oBAAoB;EAAA0B,YAFnB;AAAM","names":["PedidoProduto","forkJoin","PedidoProdutoService","constructor","http","inserir","itensCarrinho","pedido_id","observables","map","element","pedidoProduto","quant","quantidade","produto_id","id","preco","console","log","descricao","post","atualizar","produto","put","subscribe","listar","get","factory","providedIn"],"sourceRoot":"","sources":["D:\\OneDrive - Fatec Centro Paula Souza\\Documentos\\Estudos\\Fatec_ADS\\4-Web\\pw-p2\\mintz\\src\\app\\services\\pedido-produto.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { PedidoProduto } from '../pedidos/pedido-produto.model';\r\nimport { IProdutoCarrinho } from '../produtos';\r\nimport { Observable, concatMap, forkJoin, from, switchMap } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PedidoProdutoService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n  \r\n  public inserir(itensCarrinho: IProdutoCarrinho[], pedido_id: number): Observable<any> {\r\n    // Cria um array de observables para inserir os produtos\r\n    const observables: Observable<any>[] = itensCarrinho.map(element => {\r\n        let pedidoProduto: PedidoProduto = new PedidoProduto();\r\n        pedidoProduto.pedido_id = pedido_id;\r\n        pedidoProduto.quant = element.quantidade;\r\n        pedidoProduto.produto_id = element.id;\r\n        pedidoProduto.preco = element.preco;\r\n\r\n        console.log(element.descricao);\r\n        console.log(pedidoProduto.pedido_id + \" quant: \" + pedidoProduto.quant + \" id_produto: \" + pedidoProduto.produto_id);\r\n\r\n        // Retorna o observable para a inserção do produto\r\n        return this.http.post<String>(\"http://localhost:8081/api/pedido-produto\", pedidoProduto);\r\n    });\r\n\r\n    // Usa o forkJoin para aguardar a conclusão de todos os observables\r\n    return forkJoin(observables);\r\n  }\r\n\r\n  public atualizar(produto: PedidoProduto){\r\n    this.http.put<String>(\"http://localhost:8081/api/pedido-produto\", produto).subscribe();\r\n  }\r\n\r\n  public listar(pedido_id: number): Observable<PedidoProduto[]>{\r\n    return this.http.get<PedidoProduto[]>(\"http://localhost:8081/api/pedido-produto/\",)\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}