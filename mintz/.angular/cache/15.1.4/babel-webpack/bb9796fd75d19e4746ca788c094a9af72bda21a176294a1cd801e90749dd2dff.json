{"ast":null,"code":"import { Cliente } from '../cliente/cliente.model';\nimport { switchMap } from 'rxjs';\nimport { Produtos } from '../produtos/produtos.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/pedido.service\";\nimport * as i2 from \"../services/pedido-produto.service\";\nimport * as i3 from \"../services/produtos.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction PedidosComponent_section_2_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function PedidosComponent_section_2_tr_14_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const pedido_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.mostrarDetalhesPedido(pedido_r4.id));\n    });\n    i0.ɵɵelement(13, \"i\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const pedido_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pedido_r4.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(5, 4, pedido_r4.valorTotal, \"BRL\", \"R$ \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(8, 8, pedido_r4.valorFrete, \"BRL\", \"R$ \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(pedido_r4.status);\n  }\n}\nfunction PedidosComponent_section_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 11)(1, \"table\", 12)(2, \"thead\")(3, \"tr\", 8)(4, \"th\");\n    i0.ɵɵtext(5, \"# Pedido\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Frete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"th\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, PedidosComponent_section_2_tr_14_Template, 14, 12, \"tr\", 13);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.listaPedidos);\n  }\n}\nfunction PedidosComponent_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 16)(1, \"h2\");\n    i0.ɵɵelement(2, \"i\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4, \"Voc\\u00EA ainda n\\u00E3o fez nenhuma compra\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"Que tal navegar pelas ofertas e achar algo especial para voc\\u00EA?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 18);\n    i0.ɵɵtext(8, \"Ver produtos\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class PedidosComponent {\n  constructor(pedidoService, pedidoProdutoService, produtoService, route) {\n    this.pedidoService = pedidoService;\n    this.pedidoProdutoService = pedidoProdutoService;\n    this.produtoService = produtoService;\n    this.route = route;\n    this.listaPedidos = [];\n    this.listaPedidoProdutos = [];\n    this.listaProdutos = [];\n    this.cliente = new Cliente();\n    this.tbody = document.getElementById('tbody');\n  }\n  ngOnInit() {\n    const clienteLogado = localStorage.getItem(\"cliente\");\n    this.tbody = document.getElementById('tbody');\n    if (clienteLogado != null) {\n      this.cliente = JSON.parse(clienteLogado);\n      this.route.queryParams.pipe(\n      // switchMap troca para um novo observable\n      switchMap(() => this.pedidoService.listar(this.cliente.id))).subscribe(pedidos => {\n        // O resultado final é atribuído a this.produtos\n        this.listaPedidos = pedidos;\n      });\n    }\n  }\n  mostrarDetalhesPedido(pedido_id) {\n    //Limpa as variáveis\n    this.listaPedidoProdutos = [];\n    this.listaProdutos = [];\n    //Consulta a lista de produtos do pedido\n    try {\n      this.route.queryParams.pipe(switchMap(() => this.pedidoProdutoService.listar(pedido_id))).subscribe(listaProdutos => {\n        this.listaPedidoProdutos = listaProdutos;\n        console.log(listaProdutos);\n        this.consultarProduto();\n      });\n    } catch (error) {}\n  }\n  consultarProduto() {\n    this.listaPedidoProdutos.forEach(element => {\n      try {\n        //Recupera informações do produto\n        let produto = new Produtos();\n        this.produtoService.consultar(element.produto_id).subscribe(resposta => {\n          produto = resposta;\n        });\n        //Adiciona a quantidade no pedido\n        const pedidoProduto = {\n          ...produto,\n          quantidade: element.quant\n        };\n        //Insere o produto na lista\n        this.listaProdutos.push(pedidoProduto);\n        const tr = document.createElement('tr');\n        for (let i = 0; i < 4; i++) {\n          const td = document.createElement('td');\n          tr.appendChild(td);\n          switch (i) {\n            case 0:\n              const img = document.createElement('img');\n              img.src = pedidoProduto.imagem;\n              td.appendChild(img);\n              break;\n            case 1:\n              td.innerHTML = pedidoProduto.descricao;\n              break;\n            case 2:\n              td.innerHTML = pedidoProduto.quantidade.toString();\n              break;\n            case 3:\n              td.innerHTML = pedidoProduto.preco.toString();\n          }\n        }\n        this.tbody?.append(tr);\n      } catch (error) {}\n    });\n  }\n  mostrarModal() {\n    //Mostra o modal\n    document.getElementById('divDetalhesPedido').style.display = 'block';\n  }\n}\nPedidosComponent.ɵfac = function PedidosComponent_Factory(t) {\n  return new (t || PedidosComponent)(i0.ɵɵdirectiveInject(i1.PedidoService), i0.ɵɵdirectiveInject(i2.PedidoProdutoService), i0.ɵɵdirectiveInject(i3.ProdutosService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n};\nPedidosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PedidosComponent,\n  selectors: [[\"app-pedidos\"]],\n  decls: 25,\n  vars: 2,\n  consts: [[1, \"cart-title\", \"w3-text-indigo\", \"w3-margin\"], [\"class\", \"w3-margin w3-container w3-center sec-pedido\", 4, \"ngIf\", \"ngIfElse\"], [\"id\", \"divDetalhesPedido\", 1, \"w3-modal\"], [1, \"w3-modal-content\", \"w3-card-4\", \"w3-animate-top\", \"w3-round\"], [1, \"w3-indigo\", \"w3-container\", \"modal-header\", \"w3-center\"], [\"onclick\", \"document.getElementById('divDetalhesPedido').style.display='none'\", 1, \"w3-button\", \"w3-display-topright\"], [1, \"w3-container\", \"w3-padding\"], [1, \"w3-table-all\"], [1, \"w3-indigo\"], [\"id\", \"tbody\"], [\"pedidosVazio\", \"\"], [1, \"w3-margin\", \"w3-container\", \"w3-center\", \"sec-pedido\"], [1, \"w3-table-all\", \"w3-hoverable\", \"tab-pedido\"], [4, \"ngFor\", \"ngForOf\"], [1, \"w3-button\", 3, \"click\"], [1, \"fa-solid\", \"fa-arrow-up-right-from-square\"], [1, \"w3-margin\", \"w3-padding-64\", \"w3-center\", \"w3-text-indigo\", \"sec-pedido\"], [1, \"fa-solid\", \"fa-rectangle-list\", \"icoVazio\"], [\"routerLink\", \"../produtos\", 1, \"w3-button\", \"w3-indigo\", \"w3-hover-orange\", \"w3-round-large\", \"w3-xlarge\", \"w3-margin\", \"w3-padding-16\", \"btnVerMais\"]],\n  template: function PedidosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\", 0);\n      i0.ɵɵtext(1, \"Pedidos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, PedidosComponent_section_2_Template, 15, 1, \"section\", 1);\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"header\", 4)(6, \"span\", 5);\n      i0.ɵɵtext(7, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"h3\");\n      i0.ɵɵtext(9, \"Detalhes do Pedido\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 6)(11, \"table\", 7)(12, \"thead\")(13, \"tr\", 8)(14, \"th\");\n      i0.ɵɵtext(15, \"Imagem\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\");\n      i0.ɵɵtext(17, \"Produto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\");\n      i0.ɵɵtext(19, \"Quantidade\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"th\");\n      i0.ɵɵtext(21, \"Pre\\u00E7o\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(22, \"tbody\", 9);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(23, PedidosComponent_ng_template_23_Template, 9, 0, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(24);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.listaPedidos.length > 0)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i4.RouterLink, i5.CurrencyPipe],\n  styles: [\".button-remove[_ngcontent-%COMP%]{\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n.w3-card[_ngcontent-%COMP%]{\\r\\n    border-radius: 10px;\\r\\n}\\r\\n\\r\\n.btn-comandos[_ngcontent-%COMP%]{\\r\\n    width: 150px;\\r\\n}\\r\\n\\r\\n.cart-title[_ngcontent-%COMP%] {\\r\\n    font-size: 44px;\\r\\n    font-weight: 700;\\r\\n    padding: 8px 0;\\r\\n}\\r\\n\\r\\nli[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    overflow: hidden;\\r\\n    margin: 10px 0;\\r\\n    height: 100px;\\r\\n    align-items: center;\\r\\n    justify-content: space-between;\\r\\n}\\r\\n\\r\\nimg[_ngcontent-%COMP%] {\\r\\n    width: 100px;\\r\\n    height: 100px;\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.cart-total[_ngcontent-%COMP%] {\\r\\n    font-size: 24px;\\r\\n    font-weight: 700;\\r\\n    padding: 8px 0;\\r\\n}\\r\\n\\r\\ninput[_ngcontent-%COMP%] {\\r\\n    width: 40px;\\r\\n    text-align: center;\\r\\n    border: none;\\r\\n    border-bottom: 1px solid gray;\\r\\n}\\r\\n.icoVazio[_ngcontent-%COMP%]{\\r\\n    font-size: 6rem;\\r\\n}\\r\\n.btnVerMais[_ngcontent-%COMP%]{\\r\\n    width: 250px;\\r\\n}\\r\\n\\r\\n.tab-pedido[_ngcontent-%COMP%]{\\r\\n    max-width: 1200px;\\r\\n    margin-left: auto;\\r\\n    margin-right: auto;\\r\\n}\\r\\n\\r\\n.sec-pedido[_ngcontent-%COMP%]{\\r\\n    min-height: 54vh;\\r\\n}\\r\\n\\r\\n.modal-header[_ngcontent-%COMP%]{\\r\\n    padding-top: 10px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGVkaWRvcy9wZWRpZG9zLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksWUFBWTtBQUNoQjs7QUFFQTtJQUNJLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsY0FBYztBQUNsQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixnQkFBZ0I7SUFDaEIsY0FBYztJQUNkLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsOEJBQThCO0FBQ2xDOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGFBQWE7SUFDYixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksV0FBVztJQUNYLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osNkJBQTZCO0FBQ2pDO0FBQ0E7SUFDSSxlQUFlO0FBQ25CO0FBQ0E7SUFDSSxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksaUJBQWlCO0lBQ2pCLGlCQUFpQjtJQUNqQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxpQkFBaUI7QUFDckIiLCJzb3VyY2VzQ29udGVudCI6WyIuYnV0dG9uLXJlbW92ZXtcclxuICAgIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLnczLWNhcmR7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG59XHJcblxyXG4uYnRuLWNvbWFuZG9ze1xyXG4gICAgd2lkdGg6IDE1MHB4O1xyXG59XHJcblxyXG4uY2FydC10aXRsZSB7XHJcbiAgICBmb250LXNpemU6IDQ0cHg7XHJcbiAgICBmb250LXdlaWdodDogNzAwO1xyXG4gICAgcGFkZGluZzogOHB4IDA7XHJcbn1cclxuXHJcbmxpIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgbWFyZ2luOiAxMHB4IDA7XHJcbiAgICBoZWlnaHQ6IDEwMHB4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxufVxyXG5cclxuaW1nIHtcclxuICAgIHdpZHRoOiAxMDBweDtcclxuICAgIGhlaWdodDogMTAwcHg7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5cclxuLmNhcnQtdG90YWwge1xyXG4gICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcclxuICAgIHBhZGRpbmc6IDhweCAwO1xyXG59XHJcblxyXG5pbnB1dCB7XHJcbiAgICB3aWR0aDogNDBweDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xyXG59XHJcbi5pY29WYXppb3tcclxuICAgIGZvbnQtc2l6ZTogNnJlbTtcclxufVxyXG4uYnRuVmVyTWFpc3tcclxuICAgIHdpZHRoOiAyNTBweDtcclxufVxyXG5cclxuLnRhYi1wZWRpZG97XHJcbiAgICBtYXgtd2lkdGg6IDEyMDBweDtcclxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG59XHJcblxyXG4uc2VjLXBlZGlkb3tcclxuICAgIG1pbi1oZWlnaHQ6IDU0dmg7XHJcbn1cclxuXHJcbi5tb2RhbC1oZWFkZXJ7XHJcbiAgICBwYWRkaW5nLXRvcDogMTBweDtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Cliente","switchMap","Produtos","i0","PedidosComponent","constructor","pedidoService","pedidoProdutoService","produtoService","route","document","getElementById","ngOnInit","clienteLogado","localStorage","getItem","tbody","cliente","JSON","parse","queryParams","pipe","listar","id","subscribe","pedidos","listaPedidos","mostrarDetalhesPedido","pedido_id","listaPedidoProdutos","listaProdutos","console","log","consultarProduto","error","forEach","element","produto","consultar","produto_id","resposta","pedidoProduto","quantidade","quant","push","tr","createElement","i","td","appendChild","img","src","imagem","innerHTML","descricao","toString","preco","append","mostrarModal","style","display","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\OneDrive - Fatec Centro Paula Souza\\Documentos\\Estudos\\Fatec_ADS\\4-Web\\pw-p2\\mintz\\src\\app\\pedidos\\pedidos.component.ts","D:\\OneDrive - Fatec Centro Paula Souza\\Documentos\\Estudos\\Fatec_ADS\\4-Web\\pw-p2\\mintz\\src\\app\\pedidos\\pedidos.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Pedido } from './pedido.model';\r\nimport { PedidoService } from '../services/pedido.service';\r\nimport { Cliente } from '../cliente/cliente.model';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { map, switchMap } from 'rxjs';\r\nimport { PedidoProduto } from './pedido-produto.model';\r\nimport { PedidoProdutoService } from '../services/pedido-produto.service';\r\nimport { IProdutoCarrinho } from '../produtos';\r\nimport { ProdutosService } from '../services/produtos.service';\r\nimport { Produtos } from '../produtos/produtos.model';\r\n\r\n@Component({\r\n  selector: 'app-pedidos',\r\n  templateUrl: './pedidos.component.html',\r\n  styleUrls: ['./pedidos.component.css']\r\n})\r\nexport class PedidosComponent {\r\n  listaPedidos: Pedido[] = [];\r\n  listaPedidoProdutos: PedidoProduto[] = [];\r\n  listaProdutos: IProdutoCarrinho[] = []\r\n  cliente: Cliente = new Cliente();\r\n  tbody = document.getElementById('tbody');\r\n\r\n  constructor(\r\n    public pedidoService: PedidoService,\r\n    public pedidoProdutoService: PedidoProdutoService,\r\n    public produtoService: ProdutosService,\r\n    private route: ActivatedRoute\r\n  ){}\r\n\r\n  ngOnInit(){\r\n    const clienteLogado = localStorage.getItem(\"cliente\");\r\n    this.tbody = document.getElementById('tbody');\r\n    if (clienteLogado != null) {\r\n      this.cliente = JSON.parse(clienteLogado);\r\n\r\n      this.route.queryParams.pipe(\r\n        // switchMap troca para um novo observable\r\n        switchMap(() => this.pedidoService.listar(this.cliente.id))\r\n      ).subscribe(pedidos => {\r\n        // O resultado final é atribuído a this.produtos\r\n        this.listaPedidos = pedidos;\r\n      });\r\n    }\r\n  }\r\n\r\n  mostrarDetalhesPedido(pedido_id: number){\r\n    //Limpa as variáveis\r\n    this.listaPedidoProdutos = [];\r\n    this.listaProdutos = [];\r\n\r\n    //Consulta a lista de produtos do pedido\r\n    try {\r\n      this.route.queryParams.pipe(\r\n        switchMap(() => this.pedidoProdutoService.listar(pedido_id))\r\n      ).subscribe(listaProdutos => {\r\n          this.listaPedidoProdutos = listaProdutos;\r\n          console.log(listaProdutos);\r\n          this.consultarProduto();\r\n        }\r\n      )\r\n    } catch (error) {\r\n      \r\n    }\r\n  }\r\n\r\n  consultarProduto(){\r\n    this.listaPedidoProdutos.forEach(element => {\r\n      try {\r\n        //Recupera informações do produto\r\n        let produto: Produtos = new Produtos;\r\n        this.produtoService.consultar(element.produto_id).subscribe(\r\n          (resposta: Produtos) => {\r\n            produto = resposta;\r\n            \r\n            \r\n          }\r\n          );\r\n          \r\n          //Adiciona a quantidade no pedido\r\n          const pedidoProduto: IProdutoCarrinho = {\r\n            ...produto,\r\n            quantidade: element.quant\r\n          }\r\n            \r\n          //Insere o produto na lista\r\n          this.listaProdutos.push(pedidoProduto);\r\n\r\n        const tr = document.createElement('tr');\r\n        for (let i = 0; i < 4; i++) {\r\n          const td = document.createElement('td');\r\n          tr.appendChild(td);\r\n          switch (i) {\r\n            case 0:\r\n              const img = document.createElement('img');\r\n              img.src = pedidoProduto.imagem;\r\n              td.appendChild(img);\r\n              break;\r\n\r\n            case 1:\r\n              td.innerHTML = pedidoProduto.descricao;\r\n              break;\r\n\r\n            case 2:\r\n              td.innerHTML = pedidoProduto.quantidade.toString();\r\n              break;\r\n\r\n            case 3:\r\n              td.innerHTML = pedidoProduto.preco.toString();\r\n          }\r\n        }\r\n        this.tbody?.append(tr);\r\n      } catch (error) {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  mostrarModal(){\r\n    //Mostra o modal\r\n    (document.getElementById('divDetalhesPedido') as HTMLElement).style.display='block';\r\n  }\r\n}\r\n    ","<h2 class=\"cart-title w3-text-indigo w3-margin\">Pedidos</h2>\r\n<section class=\"w3-margin w3-container w3-center sec-pedido\" *ngIf=\"listaPedidos.length > 0; else pedidosVazio\">\r\n    <!-- Tabela de pedidos -->\r\n    <table class=\"w3-table-all w3-hoverable tab-pedido\">\r\n        <thead>\r\n            <tr class=\"w3-indigo\">\r\n                <th># Pedido</th>\r\n                <th>Total</th>\r\n                <th>Frete</th>\r\n                <th>Status</th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let pedido of listaPedidos\">\r\n                <td>{{pedido.id}}</td>\r\n                <td>{{pedido.valorTotal | currency:'BRL' : 'R$ '}}</td>\r\n                <td>{{pedido.valorFrete | currency:'BRL' : 'R$ '}}</td>\r\n                <td>{{pedido.status}}</td>\r\n                <td><button class=\"w3-button\" (click)=\"mostrarDetalhesPedido(pedido.id)\"><i class=\"fa-solid fa-arrow-up-right-from-square\"></i></button></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</section>\r\n\r\n<!-- Modal Detalhes do Pedido -->\r\n<div class=\"w3-modal\" id=\"divDetalhesPedido\">\r\n    <div class=\"w3-modal-content w3-card-4 w3-animate-top w3-round\">\r\n        <header class=\"w3-indigo w3-container modal-header w3-center\">\r\n            <span onclick=\"document.getElementById('divDetalhesPedido').style.display='none'\" class=\"w3-button w3-display-topright\">&times;</span>\r\n            <h3>Detalhes do Pedido</h3>\r\n        </header>\r\n        <div class=\"w3-container w3-padding\">\r\n            <table class=\"w3-table-all\">\r\n                <thead>\r\n                    <tr class=\"w3-indigo\">\r\n                        <th>Imagem</th>\r\n                        <th>Produto</th>\r\n                        <th>Quantidade</th>\r\n                        <th>Preço</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody id=\"tbody\">\r\n                    <!-- <tr *ngFor=\"let produto of listaProdutos\">\r\n                        <td><img [src]=\"produto.imagem\"></td>\r\n                        <td>{{produto.descricao}}</td>\r\n                        <td>{{produto.quantidade}}</td>\r\n                        <td>{{produto.preco}}</td>\r\n                    </tr> -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<ng-template #pedidosVazio>\r\n    <section class=\"w3-margin w3-padding-64 w3-center w3-text-indigo sec-pedido\">\r\n        <h2><i class=\"fa-solid fa-rectangle-list icoVazio\"></i></h2>\r\n        <h3>Você ainda não fez nenhuma compra</h3>\r\n        <p>Que tal navegar pelas ofertas e achar algo especial para você?</p>\r\n        <button class=\"w3-button w3-indigo w3-hover-orange w3-round-large w3-xlarge w3-margin w3-padding-16 btnVerMais\" routerLink=\"../produtos\">Ver produtos</button>\r\n    </section>\r\n</ng-template>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}