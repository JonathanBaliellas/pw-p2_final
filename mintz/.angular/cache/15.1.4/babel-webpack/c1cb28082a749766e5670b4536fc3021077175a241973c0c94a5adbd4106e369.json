{"ast":null,"code":"import { PedidoProduto } from '../pedidos/pedido-produto.model';\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PedidoProdutoService {\n  constructor(http) {\n    this.http = http;\n  }\n  inserir(produto) {\n    this.http.post(\"http://localhost:8081/api/pedido-produto\", pedidoProduto);\n  }\n  inserirProdutosAoPedido(itensCarrinho, pedido_id) {\n    // Cria um array de observables para inserir os produtos\n    const observables = itensCarrinho.map(element => {\n      let pedidoProduto = new PedidoProduto();\n      pedidoProduto.pedido_id = pedido_id;\n      pedidoProduto.quant = element.quantidade;\n      pedidoProduto.produto_id = element.id;\n      pedidoProduto.preco = element.preco;\n      console.log(element.descricao);\n      console.log(pedidoProduto.pedido_id + \" quant: \" + pedidoProduto.quant + \" id_produto: \" + pedidoProduto.produto_id);\n      // Retorna o observable para a inserção do produto\n      return this.http.post(\"http://localhost:8081/api/pedido-produto\", pedidoProduto);\n    });\n    // Usa o forkJoin para aguardar a conclusão de todos os observables\n    return forkJoin(observables);\n  }\n}\nPedidoProdutoService.ɵfac = function PedidoProdutoService_Factory(t) {\n  return new (t || PedidoProdutoService)(i0.ɵɵinject(i1.HttpClient));\n};\nPedidoProdutoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PedidoProdutoService,\n  factory: PedidoProdutoService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,aAAa,QAAQ,iCAAiC;AAE/D,SAAgCC,QAAQ,QAAyB,MAAM;;;AAKvE,OAAM,MAAOC,oBAAoB;EAE/BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAgB;EAEjCC,OAAO,CAACC,OAAsB;IACnC,IAAI,CAACF,IAAI,CAACG,IAAI,CAAS,0CAA0C,EAAEC,aAAa,CAAC;EACnF;EAEOC,uBAAuB,CAACC,aAAiC,EAAEC,SAAiB;IACjF;IACA,MAAMC,WAAW,GAAsBF,aAAa,CAACG,GAAG,CAACC,OAAO,IAAG;MAC/D,IAAIN,aAAa,GAAkB,IAAIR,aAAa,EAAE;MACtDQ,aAAa,CAACG,SAAS,GAAGA,SAAS;MACnCH,aAAa,CAACO,KAAK,GAAGD,OAAO,CAACE,UAAU;MACxCR,aAAa,CAACS,UAAU,GAAGH,OAAO,CAACI,EAAE;MACrCV,aAAa,CAACW,KAAK,GAAGL,OAAO,CAACK,KAAK;MAEnCC,OAAO,CAACC,GAAG,CAACP,OAAO,CAACQ,SAAS,CAAC;MAC9BF,OAAO,CAACC,GAAG,CAACb,aAAa,CAACG,SAAS,GAAG,UAAU,GAAGH,aAAa,CAACO,KAAK,GAAG,eAAe,GAAGP,aAAa,CAACS,UAAU,CAAC;MAEpH;MACA,OAAO,IAAI,CAACb,IAAI,CAACG,IAAI,CAAS,0CAA0C,EAAEC,aAAa,CAAC;IAC5F,CAAC,CAAC;IAEF;IACA,OAAOP,QAAQ,CAACW,WAAW,CAAC;EAC9B;;AA1BWV,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;SAApBA,oBAAoB;EAAAqB,SAApBrB,oBAAoB;EAAAsB,YAFnB;AAAM","names":["PedidoProduto","forkJoin","PedidoProdutoService","constructor","http","inserir","produto","post","pedidoProduto","inserirProdutosAoPedido","itensCarrinho","pedido_id","observables","map","element","quant","quantidade","produto_id","id","preco","console","log","descricao","factory","providedIn"],"sourceRoot":"","sources":["D:\\OneDrive - Fatec Centro Paula Souza\\Documentos\\Estudos\\Fatec_ADS\\4-Web\\pw-p2\\mintz\\src\\app\\services\\pedido-produto.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { PedidoProduto } from '../pedidos/pedido-produto.model';\r\nimport { IProdutoCarrinho } from '../produtos';\r\nimport { Observable, concatMap, forkJoin, from, switchMap } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PedidoProdutoService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  public inserir(produto: PedidoProduto){\r\n    this.http.post<String>(\"http://localhost:8081/api/pedido-produto\", pedidoProduto);\r\n  }\r\n\r\n  public inserirProdutosAoPedido(itensCarrinho: IProdutoCarrinho[], pedido_id: number): Observable<any> {\r\n    // Cria um array de observables para inserir os produtos\r\n    const observables: Observable<any>[] = itensCarrinho.map(element => {\r\n        let pedidoProduto: PedidoProduto = new PedidoProduto();\r\n        pedidoProduto.pedido_id = pedido_id;\r\n        pedidoProduto.quant = element.quantidade;\r\n        pedidoProduto.produto_id = element.id;\r\n        pedidoProduto.preco = element.preco;\r\n\r\n        console.log(element.descricao);\r\n        console.log(pedidoProduto.pedido_id + \" quant: \" + pedidoProduto.quant + \" id_produto: \" + pedidoProduto.produto_id);\r\n\r\n        // Retorna o observable para a inserção do produto\r\n        return this.http.post<String>(\"http://localhost:8081/api/pedido-produto\", pedidoProduto);\r\n    });\r\n\r\n    // Usa o forkJoin para aguardar a conclusão de todos os observables\r\n    return forkJoin(observables);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}